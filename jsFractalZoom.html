<!DOCTYPE html>
<!--
	Fractal zoomer written in javascript
	https://github.com/xyzzy/jsFractalZoom

	Copyright 2018 https://github.com/xyzzy

	This program is free software: you can redistribute it and/or modify
	it under the terms of the GNU Affero General Public License as published
	by the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	This program is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU Affero General Public License for more details.

	You should have received a copy of the GNU Affero General Public License
	along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<html>
<head>
	<title>jsFractalZoom</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
	<link rel=stylesheet href="jsFractalZoom.css">
	<script type="text/javascript" src="aria-listbox.js"></script>
	<script type="text/javascript" src="aria-listbox-collapsible.js"></script>
	<script type="text/javascript" src="aria-slider.js"></script>
	<script type="text/javascript" src="aria-button.js"></script>
</head>
<body>
<div id="top-wrapper" class="pane">
	<div id="top" class="pane">
	</div>
</div>
<div id="bot-wrapper" class="pane">
	<div id="view-wrapper" class="pane">
		<div id="view" class="pane">
		</div>
	</div>
	<div id="nav-wrapper" class="pane">
		<div id="nav" class="pane">

			<div class="navRow navButton">
				<button id="idPowerButton"
					role="button">
					Power

					<div class="light-outer">
						<div class="light-inner"></div>
					</div>
				</button>
				<span class="navCaption">[P]</span>

				<button id="idAutoPilotButton"
					role="button">
					Autopilot

					<div class="light-outer">
						<div class="light-inner"></div>
					</div>
				</button>
				<span class="navCaption">[A]</span>
			</div>

			<div class="navSeparator">
				<div class="navSepLeft">
					<div class="navLine"></div>
				</div>
				<div class="navSepName"><strong>Algorithm</strong></div>
				<div class="navSepRight">
					<div class="navLine"></div>
				</div>
			</div>

			<div id="idFormula" class="navRow navListbox">
				<div id="idFormulaLabel" class="navLabel">Formula</div>
				<div id="idFormulaLeft" class="navLeft"></div>
				<div id="idFormulaValue" class="navValue">
					<button id="idFormulaButton"
						aria-haspopup="listbox"
						aria-labelledby="idFormulaLabel idFormulaButton">
						mandelbrot

						<div class="mark-outer">
							<div class="mark-inner"></div>
						</div>
					</button>
					<ul id="idFormulaList"
					    class="hidden"
					    tabindex="-1"
					    role="listbox"
					    aria-labelledby="idFormulaLabel">
						<li id="exp_mandelbrot" role="option">mandelbrot</li>
						<li id="exp_mandelbrot3" role="option">mandelbrot^3</li>
						<li id="exp_mandelbrot4" role="option">mandlebrot^4</li>
						<li id="exp_mandelbrot5" role="option">mandlebrot^5</li>
						<li id="exp_mandelbrot6" role="option">mandelbrot^6</li>
						<li id="exp_octal" role="option">octal</li>
						<li id="exp_newton" role="option">newton</li>
						<li id="exp_barnsley1" role="option">barnsley1</li>
						<li id="exp_barnsley2" role="option">barnsley2</li>
						<li id="exp_phoenix" role="option">phoenix</li>
						<li id="exp_magnet1" role="option">magnet1</li>
						<li id="exp_magnet2" role="option">magnet2</li>
					</ul>
				</div>
				<div id="idFormulaRight" class="navRight"><span class="navCaption">[F]</span></div>
			</div>

			<div id="idIncolour" class="navRow navListbox">
				<div id="idIncolourLabel" class="navLabel">Incolour</div>
				<div id="idIncolourLeft" class="navLeft"></div>
				<div id="idIncolourValue" class="navValue">
					<button id="idIncolourButton"
						aria-haspopup="listbox"
						aria-labelledby="idIncolourLabel idIncolourButton">
						maxiter

						<div class="mark-outer">
							<div class="mark-inner"></div>
						</div>
					</button>
					<ul id="idIncolourList"
					    class="hidden"
					    tabindex="-1"
					    role="listbox"
					    aria-labelledby="idIncolourLabel">
						<li id="inc_mandelbrot" role="option">maxiter</li>
						<li id="inc_mandelbrot3" role="option">zmag</li>
						<li id="inc_mandelbrot4" role="option">decomposition-like</li>
						<li id="inc_mandelbrot5" role="option">real/imag</li>
						<li id="inc_mandelbrot6" role="option">abs(abs(c)-abs(r))</li>
						<li id="inc_octal" role="option">cos(mag)</li>
						<li id="inc_newton" role="option">mag*cos(real^2)</li>
						<li id="inc_barnsley1" role="option">sin(real^2-imag^2)</li>
						<li id="inc_barnsley2" role="option">atan(real*imag*creal*cimag)</li>
						<li id="inc_phoenix" role="option">squares</li>
					</ul>
				</div>
				<div id="idIncolourRight" class="navRight"><span class="navCaption">[I]</span></div>
			</div>

			<div id="idOutcolour" class="navRow navListbox">
				<div id="idOutcolourLabel" class="navLabel">Outcolour</div>
				<div id="idOutcolourLeft" class="navLeft"></div>
				<div id="idOutcolourValue" class="navValue">
					<button id="idOutcolourButton"
						aria-haspopup="listbox"
						aria-labelledby="idOutcolourLabel idOutcolourButton">
						iter

						<div class="mark-outer">
							<div class="mark-inner"></div>
						</div>
					</button>
					<ul id="idOutcolourList"
					    class="hidden"
					    tabindex="-1"
					    role="listbox"
					    aria-labelledby="idOutcolourLabel">
						<li id="outc_mandelbrot" role="option">iter</li>
						<li id="outc_mandelbrot3" role="option">iter+real</li>
						<li id="outc_mandelbrot4" role="option">iter+imag</li>
						<li id="outc_mandelbrot5" role="option">iter+real/imag</li>
						<li id="outc_mandelbrot6" role="option">iter+real+imag+real/imag</li>
						<li id="outc_octal" role="option">binary decomposition</li>
						<li id="outc_newton" role="option">biomorphs</li>
						<li id="outc_barnsley1" role="option">potential</li>
						<li id="putc_barnsley2" role="option">color decomposition</li>
					</ul>
				</div>
				<div id="idOutcolourRight" class="navRight"><span class="navCaption">[O]</span></div>
			</div>

			<div id="idPlane" class="navRow navListbox">
				<div id="idPlaneLabel" class="navLabel">Plane</div>
				<div id="idPlaneLeft" class="navLeft"></div>
				<div id="idPlaneValue" class="navValue">
					<button id="idPlaneButton"
						aria-haspopup="listbox"
						aria-labelledby="idPlaneLabel idPlaneButton">
						mu

						<div class="mark-outer">
							<div class="mark-inner"></div>
						</div>
					</button>
					<ul id="idPlaneList"
					    class="hidden"
					    tabindex="-1"
					    role="listbox"
					    aria-labelledby="idPlaneLabel">
						<li id="plane_mandelbrot" role="option">mu</li>
						<li id="plane_mandelbrot3" role="option">1/mu</li>
						<li id="plane_mandelbrot4" role="option">1/(mu+0.25)</li>
						<li id="plane_mandelbrot5" role="option">lambda</li>
						<li id="plane_mandelbrot6" role="option">1/lambda</li>
						<li id="plane_octal" role="option">1/(lambda-1)</li>
						<li id="plane_newton" role="option">1/(mu-1.40115)</li>
					</ul>
				</div>
				<div id="idPlaneRight" class="navRight"><span class="navCaption">[P]</span></div>
			</div>

			<div class="navSeparator">
				<div class="navSepLeft">
					<div class="navLine"></div>
				</div>
				<div class="navSepName"><strong>Animation</strong></div>
				<div class="navSepRight">
					<div class="navLine"></div>
				</div>
			</div>

			<div id="idSpeed" class="navRow navSlider">
				<div id="idSpeedLabel" class="navLabel">Speed</div>
				<div id="idSpeedLeft" class="navLeft">999</div>
				<div id="idSpeedValue" class="navValue">
					<div id="idSpeedRail" class="rail">
						<div id="idSpeedThumb"
						     role="slider"
						     tabindex="0"
						     class="thumb"
						     aria-valuemin="0"
						     aria-valuenow="35"
						     aria-valuemax="255"
						     aria-labelledby="idSpeedLabel">
						</div>
					</div>
				</div>
				<div id="idSpeedRight" class="navRight"><span class="navCaption">[UP/DOWN]</span></div>
			</div>

			<div id="idRotate" class="navRow navSlider">
				<div id="idRotateLabel" class="navLabel">Rotate</div>
				<div id="idRotateLeft" class="navLeft">999</div>
				<div id="idRotateValue" class="navValue">
					<div id="idRotateRail" class="rail">
						<div id="idRotateThumb"
						     role="slider"
						     tabindex="0"
						     class="thumb"
						     aria-valuemin="0"
						     aria-valuenow="35"
						     aria-valuemax="255"
						     aria-labelledby="idRotateLabel">
						</div>
					</div>
				</div>
				<div id="idRotateRight" class="navRight"><span class="navCaption">[PAGEUP/PAGEDN]</span></div>
			</div>

			<div class="navSeparator">
				<div class="navSepLeft">
					<div class="navLine"></div>
				</div>
				<div class="navSepName"><strong>Colours</strong></div>
				<div class="navSepRight">
					<div class="navLine"></div>
				</div>
			</div>

			<div id="idCycle" class="navRow navSlider">
				<div id="idCycleLabel" class="navLabel">Cycle speed</div>
				<div id="idCycleLeft" class="navLeft">999</div>
				<div id="idCycleValue" class="navValue">
					<div id="idCycleRail" class="rail">
						<div id="idCycleThumb"
						     role="slider"
						     tabindex="0"
						     class="thumb"
						     aria-valuemin="0"
						     aria-valuenow="35"
						     aria-valuemax="255"
						     aria-labelledby="idCycleLabel">
						</div>
					</div>
				</div>
				<div id="idCycleRight" class="navRight"><span class="navCaption">[]</span></div>
			</div>

			<div id="idPalette" class="navRow navButton">
				<div id="idPaletteLabel" class="navLabel">Palette</div>
				<div id="idPaletteLeft" class="navLeft"></div>
				<div id="idPaletteValue" class="navValue">
					<button id="idRandomPaletteButton"
						role="button">
						Random

						<div class="light-outer">
							<div class="light-inner"></div>
						</div>
					</button>
					<span class="navCaption">[R]</span>

					<button id="idDefaultPaletteButton"
						role="button">
						Default

						<div class="light-outer">
							<div class="light-inner"></div>
						</div>
					</button>
					<span class="navCaption">[D]</span>
				</div>
				<div id="idPaletteRight" class="navRight"></div>
			</div>

			<div class="navSeparator">
				<div class="navSepLeft">
					<div class="navLine"></div>
				</div>
				<div class="navSepName"><strong>Performance</strong></div>
				<div class="navSepRight">
					<div class="navLine"></div>
				</div>
			</div>

			<div id="idDepth" class="navRow navSlider">
				<div id="idDepthLabel" class="navLabel">Depth</div>
				<div id="idDepthLeft" class="navLeft">999</div>
				<div id="idDepthValue" class="navValue">
					<div id="idDepthRail" class="rail">
						<div id="idDepthThumb"
						     role="slider"
						     tabindex="0"
						     class="thumb"
						     aria-valuemin="0"
						     aria-valuenow="35"
						     aria-valuemax="255"
						     aria-labelledby="idDepthLabel">
						</div>
					</div>
				</div>
				<div id="idDepthRight" class="navRight"><span class="navCaption">[]</span></div>
			</div>

			<div id="idFrame" class="navRow navSlider">
				<div id="idFrameLabel" class="navLabel">Framerate</div>
				<div id="idFrameLeft" class="navLeft">999</div>
				<div id="idFrameValue" class="navValue">
					<div id="idFrameRail" class="rail">
						<div id="idFrameThumb"
						     role="slider"
						     tabindex="0"
						     class="thumb"
						     aria-valuemin="0"
						     aria-valuenow="35"
						     aria-valuemax="255"
						     aria-labelledby="idFrameLabel">
						</div>
					</div>
				</div>
				<div id="idFrameRight" class="navRight"><span class="navCaption">[]</span></div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	var __ = {};

	/*
	 * remove whitespace between elements
	 * https://blog.nightly.mozilla.org/2016/10/17/devtools-now-display-white-space-text-nodes-in-the-dom-inspector
	 */
	function cleanNode(node) {
		var child;
		for (var i = node.childNodes.length; i--;) {
			child = node.childNodes[i];
			// If commentt/textNode and has no non-whitespace character in it, delete it.
			if (child.nodeType === 3 && !/\S/.test(child.nodeValue)) {
				node.removeChild(child);
				// n--;
			}
			else {
				cleanNode(child);
			}
		}
	}

	window.addEventListener('load', function () {
		/*
		// Sliders before the listview popup
		__.speedSlider = new Slider(__.redPad, __.redText,__.redValue);
		__.redSlider.init();
		*/
		cleanNode(document.body);

		__.speedThumb = document.getElementById('idSpeedThumb'); // The DOM object containing aria enhancements
		__.speedRail = document.getElementById('idSpeedRail'); // responsive pad
		__.speedText = document.getElementById('idSpeedLeft'); // Feedback value
		__.speed = new Slider(__.speedThumb, __.speedRail, __.speedText);

		__.rotateThumb = document.getElementById('idRotateThumb'); // The DOM object containing aria enhancements
		__.rotateRail = document.getElementById('idRotateRail'); // responsive pad
		__.rotateText = document.getElementById('idRotateLeft'); // Feedback value
		__.rotate = new Slider(__.rotateThumb, __.rotateRail, __.rotateText);

		__.cycleThumb = document.getElementById('idCycleThumb'); // The DOM object containing aria enhancements
		__.cycleRail = document.getElementById('idCycleRail'); // responsive pad
		__.cycleText = document.getElementById('idCycleLeft'); // Feedback value
		__.cycle = new Slider(__.cycleThumb, __.cycleRail, __.cycleText);

		__.depthThumb = document.getElementById('idDepthThumb'); // The DOM object containing aria enhancements
		__.depthRail = document.getElementById('idDepthRail'); // responsive pad
		__.depthText = document.getElementById('idDepthLeft'); // Feedback value
		__.depth = new Slider(__.depthThumb, __.depthRail, __.depthText);

		__.frameThumb = document.getElementById('idFrameThumb'); // The DOM object containing aria enhancements
		__.frameRail = document.getElementById('idFrameRail'); // responsive pad
		__.frameText = document.getElementById('idFrameLeft'); // Feedback value
		__.frame = new Slider(__.frameThumb, __.frameRail, __.frameText);

		__.button = document.getElementById('idFormulaButton');
		__.exListbox = new aria.Listbox(document.getElementById('idFormulaList'));
		__.listboxButton = new aria.ListboxButton(__.button, __.exListbox);

		__.button = document.getElementById('idIncolourButton');
		__.exListbox = new aria.Listbox(document.getElementById('idIncolourList'));
		__.listboxButton = new aria.ListboxButton(__.button, __.exListbox);

		__.button = document.getElementById('idOutcolourButton');
		__.exListbox = new aria.Listbox(document.getElementById('idOutcolourList'));
		__.listboxButton = new aria.ListboxButton(__.button, __.exListbox);

		__.button = document.getElementById('idPlaneButton');
		__.exListbox = new aria.Listbox(document.getElementById('idPlaneList'));
		__.listboxButton = new aria.ListboxButton(__.button, __.exListbox);

		__.button = document.getElementById('idPowerButton');
		__.button = new Button(__.button);
		__.button = document.getElementById('idAutoPilotButton');
		__.button = new Button(__.button);
		__.button = document.getElementById('idRandomPaletteButton');
		__.button = new Button(__.button);
		__.button = document.getElementById('idDefaultPaletteButton');
		__.button = new Button(__.button);
	});
</script>
</body>
</html>
